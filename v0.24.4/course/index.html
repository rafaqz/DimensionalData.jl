<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Crash course ¬∑ DimensionalData.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">DimensionalData.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li class="is-active"><a class="tocitem" href>Crash course</a><ul class="internal"><li><a class="tocitem" href="#Dimensions-and-DimArrays"><span>Dimensions and DimArrays</span></a></li><li><a class="tocitem" href="#Indexing-the-array-by-name-and-index"><span>Indexing the array by name and index</span></a></li><li><a class="tocitem" href="#Indexing-Performance"><span>Indexing Performance</span></a></li><li><a class="tocitem" href="#Specifying-dims-keyword-arguments-with-Dimension"><span>Specifying <code>dims</code> keyword arguments with <code>Dimension</code></span></a></li><li><a class="tocitem" href="#LookupArrays-and-Selectors"><span>LookupArrays and Selectors</span></a></li><li><a class="tocitem" href="#LookupArrays-and-traits"><span>LookupArrays and traits</span></a></li><li><a class="tocitem" href="#LookupArray-detection"><span>LookupArray detection</span></a></li><li><a class="tocitem" href="#Referenced-dimensions"><span>Referenced dimensions</span></a></li><li><a class="tocitem" href="#Warnings"><span>Warnings</span></a></li></ul></li><li><a class="tocitem" href="../api/">API</a></li><li><a class="tocitem" href="../developer/">For Developers</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Crash course</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Crash course</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/rafaqz/DimensionalData.jl/blob/main/docs/src/course.md" title="Edit on GitHub"><span class="docs-icon fab">ÔÇõ</span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Crash-course"><a class="docs-heading-anchor" href="#Crash-course">Crash course</a><a id="Crash-course-1"></a><a class="docs-heading-anchor-permalink" href="#Crash-course" title="Permalink"></a></h1><h2 id="Dimensions-and-DimArrays"><a class="docs-heading-anchor" href="#Dimensions-and-DimArrays">Dimensions and DimArrays</a><a id="Dimensions-and-DimArrays-1"></a><a class="docs-heading-anchor-permalink" href="#Dimensions-and-DimArrays" title="Permalink"></a></h2><p>The core type of DimensionalData.jl is the <a href="../api/#DimensionalData.Dimensions.Dimension"><code>Dimension</code></a> and the types that inherit from it, such as <code>Ti</code>, <code>X</code>, <code>Y</code>, <code>Z</code>, the generic <code>Dim{:x}</code>, or others that you define manually using the <a href="../api/#DimensionalData.Dimensions.@dim"><code>@dim</code></a> macro.</p><p><code>Dimension</code>s are primarily used in <a href="../api/#DimensionalData.DimArray"><code>DimArray</code></a>, other <a href="../api/#DimensionalData.AbstractDimArray"><code>AbstractDimArray</code></a>.</p><p>We can use dimensions without a value index - these simply label the axis. A <code>DimArray</code> with labelled dimensions is constructed by:</p><pre><code class="language-julia hljs">using DimensionalData
A = rand(X(5), Y(5))
A[Y(1), X(2)]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">0.7667970365022592</code></pre><p>As shown above, <code>Dimension</code>s can be used to construct arrays in <code>rand</code>, <code>ones</code>, <code>zeros</code> and <code>fill</code> with either a range for a lookup index or a number for the dimension length.</p><p>Or we can use the <code>Dim{X}</code> dims by using <code>Symbol</code>s, and indexing with keywords:</p><pre><code class="language-julia hljs">A = DimArray(rand(5, 5), (:a, :b))
A[a=3, b=5]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">0.2834013103457036</code></pre><p>Often, we want to provide a lookup index for the dimension:</p><pre><code class="language-julia hljs">using Dates
t = DateTime(2001):Month(1):DateTime(2001,12)
x = 10:10:100
A = rand(X(x), Ti(t))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">10√ó12 DimArray{Float64,2} with dimensions: 
  X Sampled{Int64} 10:10:100 ForwardOrdered Regular Points,
  Ti Sampled{DateTime} DateTime(&quot;2001-01-01T00:00:00&quot;):Month(1):DateTime(&quot;2001-12-01T00:00:00&quot;) ForwardOrdered Regular Points
       2001-01-01T00:00:00  ‚Ä¶   2001-12-01T00:00:00
  10  0.658815                             0.682579
  20  0.515627                             0.806625
  30  0.260715                             0.708011
  40  0.59552                              0.515411
  50  0.292462                          ‚Ä¶  0.608607
  60  0.28858                              0.887999
  70  0.61816                              0.494824
  80  0.66426                              0.0895199
  90  0.753508                             0.34124
 100  0.0368842                         ‚Ä¶  0.52376</code></pre><p>Here both <code>X</code> and <code>Ti</code> are dimensions from <code>DimensionalData</code>. The currently exported dimensions are <code>X, Y, Z, Ti</code> (<code>Ti</code> is shortening of <code>Time</code>).</p><p>The length of each dimension index has to match the size of the corresponding array axis. </p><p>This can also be done with <code>Symbol</code>, using <code>Dim{X}</code>:</p><pre><code class="language-julia hljs">A2 = DimArray(rand(12, 10), (time=t, distance=x))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">12√ó10 DimArray{Float64,2} with dimensions: 
  Dim{:time} Sampled{DateTime} DateTime(&quot;2001-01-01T00:00:00&quot;):Month(1):DateTime(&quot;2001-12-01T00:00:00&quot;) ForwardOrdered Regular Points,
  Dim{:distance} Sampled{Int64} 10:10:100 ForwardOrdered Regular Points
                                   ‚Ä¶  80          90         100
  2001-01-01T00:00:00      0.430767    0.35405     0.173366
  2001-02-01T00:00:00      0.866392    0.763958    0.392606
  2001-03-01T00:00:00      0.252924    0.812198    0.712298
  2001-04-01T00:00:00      0.552336    0.1997      0.360478
  2001-05-01T00:00:00  ‚Ä¶   0.932933    0.267992    0.942259
  2001-06-01T00:00:00      0.0880607   0.536859    0.0586237
  2001-07-01T00:00:00      0.404323    0.849045    0.112467
  2001-08-01T00:00:00      0.0653725   0.610995    0.94572
  2001-09-01T00:00:00      0.901728    0.410387    0.447162
  2001-10-01T00:00:00  ‚Ä¶   0.539268    0.862726    0.117027
  2001-11-01T00:00:00      0.333221    0.804627    0.508327
  2001-12-01T00:00:00      0.730196    0.448929    0.999031</code></pre><p>Symbols can be more convenient to use than defining custom dims with <code>@dim</code>, but have some downsides. They don&#39;t inherit from a specific <code>Dimension</code> type, so plots will not know what axis to put them on. They also cannot use the basic constructor methods like <code>rand</code> or <code>zeros</code>, as we cannot dispatch on <code>Symbol</code> for Base methods without &quot;type-piracy&quot;.</p><h2 id="Indexing-the-array-by-name-and-index"><a class="docs-heading-anchor" href="#Indexing-the-array-by-name-and-index">Indexing the array by name and index</a><a id="Indexing-the-array-by-name-and-index-1"></a><a class="docs-heading-anchor-permalink" href="#Indexing-the-array-by-name-and-index" title="Permalink"></a></h2><p>Dimensions can be used to index the array by name, without having to worry about the order of the dimensions.</p><p>The simplest case is to select a dimension by index. Let&#39;s say every 2nd point of the <code>Ti</code> dimension and every 3rd point of the <code>X</code> dimension. This is done with the simple <code>Ti(range)</code> syntax like so:</p><pre><code class="language-julia hljs">A[X(1:3:11), Ti(1:2:11)]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">4√ó6 DimArray{Float64,2} with dimensions: 
  X Sampled{Int64} 10:30:100 ForwardOrdered Regular Points,
  Ti Sampled{DateTime} DateTime(&quot;2001-01-01T00:00:00&quot;):Month(2):DateTime(&quot;2001-11-01T00:00:00&quot;) ForwardOrdered Regular Points
       2001-01-01T00:00:00  ‚Ä¶   2001-11-01T00:00:00
  10  0.658815                             0.915681
  40  0.59552                              0.670174
  70  0.61816                              0.469878
 100  0.0368842                            0.165132</code></pre><p>When specifying only one dimension, all elements of the other dimensions are assumed to be included:</p><pre><code class="language-julia hljs">A[X(1:3:10)]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">4√ó12 DimArray{Float64,2} with dimensions: 
  X Sampled{Int64} 10:30:100 ForwardOrdered Regular Points,
  Ti Sampled{DateTime} DateTime(&quot;2001-01-01T00:00:00&quot;):Month(1):DateTime(&quot;2001-12-01T00:00:00&quot;) ForwardOrdered Regular Points
       2001-01-01T00:00:00  ‚Ä¶   2001-12-01T00:00:00
  10  0.658815                             0.682579
  40  0.59552                              0.515411
  70  0.61816                              0.494824
 100  0.0368842                            0.52376</code></pre><div class="admonition is-info"><header class="admonition-header">Indexing</header><div class="admonition-body"><p>Indexing <code>AbstractDimArray</code>s works with <code>getindex</code>, <code>setindex!</code> and <code>view</code>. The result is still an <code>AbstracDimArray</code>, unless using all single <code>Int</code> or <code>Selector</code>s that resolve to <code>Int</code>.</p></div></div><p><code>Dimension</code>s can be used to construct arrays in <code>rand</code>, <code>ones</code>, <code>zeros</code> and <code>fill</code> with either a range for a lookup index or a number for the dimension length.</p><pre><code class="language-julia hljs">using DimensionalData
A1 = ones(X(1:40), Y(50))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">40√ó50 DimArray{Float64,2} with dimensions: 
  X Sampled{Int64} 1:40 ForwardOrdered Regular Points,
  Y
  1  1.0  1.0  1.0  1.0  1.0  1.0  1.0  ‚Ä¶  1.0  1.0  1.0  1.0  1.0  1.0  1.0
  2  1.0  1.0  1.0  1.0  1.0  1.0  1.0     1.0  1.0  1.0  1.0  1.0  1.0  1.0
  3  1.0  1.0  1.0  1.0  1.0  1.0  1.0     1.0  1.0  1.0  1.0  1.0  1.0  1.0
  4  1.0  1.0  1.0  1.0  1.0  1.0  1.0     1.0  1.0  1.0  1.0  1.0  1.0  1.0
  5  1.0  1.0  1.0  1.0  1.0  1.0  1.0     1.0  1.0  1.0  1.0  1.0  1.0  1.0
  6  1.0  1.0  1.0  1.0  1.0  1.0  1.0  ‚Ä¶  1.0  1.0  1.0  1.0  1.0  1.0  1.0
  7  1.0  1.0  1.0  1.0  1.0  1.0  1.0     1.0  1.0  1.0  1.0  1.0  1.0  1.0
  ‚ãÆ                      ‚ãÆ              ‚ã±  ‚ãÆ                        ‚ãÆ    
 34  1.0  1.0  1.0  1.0  1.0  1.0  1.0     1.0  1.0  1.0  1.0  1.0  1.0  1.0
 35  1.0  1.0  1.0  1.0  1.0  1.0  1.0     1.0  1.0  1.0  1.0  1.0  1.0  1.0
 36  1.0  1.0  1.0  1.0  1.0  1.0  1.0     1.0  1.0  1.0  1.0  1.0  1.0  1.0
 37  1.0  1.0  1.0  1.0  1.0  1.0  1.0  ‚Ä¶  1.0  1.0  1.0  1.0  1.0  1.0  1.0
 38  1.0  1.0  1.0  1.0  1.0  1.0  1.0     1.0  1.0  1.0  1.0  1.0  1.0  1.0
 39  1.0  1.0  1.0  1.0  1.0  1.0  1.0     1.0  1.0  1.0  1.0  1.0  1.0  1.0
 40  1.0  1.0  1.0  1.0  1.0  1.0  1.0     1.0  1.0  1.0  1.0  1.0  1.0  1.0</code></pre><p>We can also use dim wrappers for indexing, so that the dimension order in the underlying array does not need to be known:</p><pre><code class="language-julia hljs">A1[Y(1), X(1:10)]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">10-element DimArray{Float64,1} with dimensions: 
  X Sampled{Int64} 1:10 ForwardOrdered Regular Points
and reference dimensions: Y
  1  1.0
  2  1.0
  3  1.0
  4  1.0
  5  1.0
  6  1.0
  7  1.0
  8  1.0
  9  1.0
 10  1.0</code></pre><h2 id="Indexing-Performance"><a class="docs-heading-anchor" href="#Indexing-Performance">Indexing Performance</a><a id="Indexing-Performance-1"></a><a class="docs-heading-anchor-permalink" href="#Indexing-Performance" title="Permalink"></a></h2><p>Indexing with <code>Dimension</code> has no runtime cost:</p><pre><code class="language-julia hljs">julia&gt; A2 = ones(X(3), Y(3))
3√ó3 DimArray{Float64,2} with dimensions: X, Y
 1.0  1.0  1.0
 1.0  1.0  1.0
 1.0  1.0  1.0

julia&gt; @btime $A2[X(1), Y(2)]
  1.077 ns (0 allocations: 0 bytes)
1.0

julia&gt; @btime parent($A2)[1, 2]
  1.078 ns (0 allocations: 0 bytes)
1.0</code></pre><h2 id="Specifying-dims-keyword-arguments-with-Dimension"><a class="docs-heading-anchor" href="#Specifying-dims-keyword-arguments-with-Dimension">Specifying <code>dims</code> keyword arguments with <code>Dimension</code></a><a id="Specifying-dims-keyword-arguments-with-Dimension-1"></a><a class="docs-heading-anchor-permalink" href="#Specifying-dims-keyword-arguments-with-Dimension" title="Permalink"></a></h2><p>In many Julia functions like <code>size</code> or <code>sum</code>, you can specify the dimension along which to perform the operation as an <code>Int</code>. It is also possible to do this using <a href="../api/#DimensionalData.Dimensions.Dimension"><code>Dimension</code></a> types with <code>AbstractDimArray</code>:</p><pre><code class="language-julia hljs">A3 = rand(X(3), Y(4), Ti(5));
sum(A3; dims=Ti)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">3√ó4√ó1 DimArray{Float64,3} with dimensions: X, Y, Ti
[:, :, 1]
 2.29036  1.27339  1.48792  1.89509
 2.58739  3.68039  2.21895  1.34987
 2.7614   2.36395  2.38865  2.16698</code></pre><p>This also works in methods from <code>Statistics</code>:</p><pre><code class="language-julia hljs">using Statistics
mean(A3; dims=Ti)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">3√ó4√ó1 DimArray{Float64,3} with dimensions: X, Y, Ti
[:, :, 1]
 0.458071  0.254679  0.297583  0.379019
 0.517479  0.736079  0.443791  0.269974
 0.552281  0.47279   0.477729  0.433396</code></pre><h3 id="Methods-where-dims,-dim-types,-or-Symbols-can-be-used-to-indicate-the-array-dimension:"><a class="docs-heading-anchor" href="#Methods-where-dims,-dim-types,-or-Symbols-can-be-used-to-indicate-the-array-dimension:">Methods where dims, dim types, or <code>Symbol</code>s can be used to indicate the array dimension:</a><a id="Methods-where-dims,-dim-types,-or-Symbols-can-be-used-to-indicate-the-array-dimension:-1"></a><a class="docs-heading-anchor-permalink" href="#Methods-where-dims,-dim-types,-or-Symbols-can-be-used-to-indicate-the-array-dimension:" title="Permalink"></a></h3><ul><li><code>size</code>, <code>axes</code>, <code>firstindex</code>, <code>lastindex</code></li><li><code>cat</code>, <code>reverse</code>, <code>dropdims</code></li><li><code>reduce</code>, <code>mapreduce</code></li><li><code>sum</code>, <code>prod</code>, <code>maximum</code>, <code>minimum</code>,</li><li><code>mean</code>, <code>median</code>, <code>extrema</code>, <code>std</code>, <code>var</code>, <code>cor</code>, <code>cov</code></li><li><code>permutedims</code>, <code>adjoint</code>, <code>transpose</code>, <code>Transpose</code></li><li><code>mapslices</code>, <code>eachslice</code></li></ul><h2 id="LookupArrays-and-Selectors"><a class="docs-heading-anchor" href="#LookupArrays-and-Selectors">LookupArrays and Selectors</a><a id="LookupArrays-and-Selectors-1"></a><a class="docs-heading-anchor-permalink" href="#LookupArrays-and-Selectors" title="Permalink"></a></h2><p>Indexing by value in <code>DimensionalData</code> is done with <a href="../api/#Selectors">Selectors</a>. IntervalSets.jl is now used for selecting ranges of values (formerly <code>Between</code>).</p><table><tr><th style="text-align: left">Selector</th><th style="text-align: left">Description</th></tr><tr><td style="text-align: left">[<code>At(x)</code>]</td><td style="text-align: left">get the index exactly matching the passed in value(s)</td></tr><tr><td style="text-align: left">[<code>Near(x)</code>]</td><td style="text-align: left">get the closest index to the passed in value(s)</td></tr><tr><td style="text-align: left">[<code>Contains(x)</code>]</td><td style="text-align: left">get indices where the value x falls within an interval</td></tr><tr><td style="text-align: left">[<code>Where(f)</code>]</td><td style="text-align: left">filter the array axis by a function of the dimension index values.</td></tr><tr><td style="text-align: left">[<code>a..b</code>]</td><td style="text-align: left">get all indices between two values, inclusively.</td></tr><tr><td style="text-align: left">[<code>OpenInterval(a, b)</code>]</td><td style="text-align: left">get all indices between <code>a</code> and <code>b</code>, exclusively.</td></tr><tr><td style="text-align: left">[<code>Interval{A,B}(a, b)</code>]</td><td style="text-align: left">get all indices between <code>a</code> and <code>b</code>, as <code>:closed</code> or <code>:open</code>.</td></tr></table><p>Selectors find indices in the <code>LookupArray</code>, for each dimension.  Here we use an <code>Interval</code> to select a range between integers and <code>DateTime</code>:</p><pre><code class="language-julia hljs">A[X(12..35), Ti(Date(2001, 5)..Date(2001, 7))]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">2√ó3 DimArray{Float64,2} with dimensions: 
  X Sampled{Int64} 20:10:30 ForwardOrdered Regular Points,
  Ti Sampled{DateTime} DateTime(&quot;2001-05-01T00:00:00&quot;):Month(1):DateTime(&quot;2001-07-01T00:00:00&quot;) ForwardOrdered Regular Points
      2001-05-01T00:00:00  ‚Ä¶   2001-07-01T00:00:00
 20  0.337865                             0.0951815
 30  0.112987                             0.727763</code></pre><p>Selectors can be used in <code>getindex</code>, <code>setindex!</code> and <code>view</code> to select indices matching the passed in value(s)</p><p>We can use selectors inside dim wrappers, here selecting values from <code>DateTime</code> and <code>Int</code>:</p><pre><code class="language-julia hljs">using Dates
timespan = DateTime(2001,1):Month(1):DateTime(2001,12)
A4 = rand(Ti(timespan), X(10:10:100))
A4[X(Near(35)), Ti(At(DateTime(2001,5)))]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">0.12478954339609105</code></pre><p>Without dim wrappers selectors must be in the right order, and specify all axes:</p><pre><code class="language-julia hljs">using Unitful
A5 = rand(Y((1:10:100)u&quot;m&quot;), Ti((1:5:100)u&quot;s&quot;));
A5[10.5u&quot;m&quot; .. 50.5u&quot;m&quot;, Near(23u&quot;s&quot;)]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">4-element DimArray{Float64,1} with dimensions: 
  Y Sampled{Quantity{Int64, ùêã, Unitful.FreeUnits{(m,), ùêã, nothing}}} (11:10:41) m ForwardOrdered Regular Points
and reference dimensions: 
  Ti Sampled{Quantity{Int64, ùêì, Unitful.FreeUnits{(s,), ùêì, nothing}}} (21:5:21) s ForwardOrdered Regular Points
 11 m  0.140652
 21 m  0.920243
 31 m  0.869604
 41 m  0.958774</code></pre><p>We can also use Linear indices as in standard <code>Array</code>:</p><pre><code class="language-julia hljs">A5[1:5]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">5-element Vector{Float64}:
 0.9639355727931804
 0.37242798628935936
 0.4714680386947909
 0.6521717025792269
 0.36422339699921524</code></pre><p>But unless the <code>DimArray</code> is one dimensional, this will return a regular <code>Array</code>. It is not possible to keep the <code>LookupArray</code> or even <code>Dimension</code>s after linear indexing is used.</p><h2 id="LookupArrays-and-traits"><a class="docs-heading-anchor" href="#LookupArrays-and-traits">LookupArrays and traits</a><a id="LookupArrays-and-traits-1"></a><a class="docs-heading-anchor-permalink" href="#LookupArrays-and-traits" title="Permalink"></a></h2><p>Using a regular range or <code>Vector</code> as a lookup index has a number of downsides. We cannot use <code>searchsorted</code> for fast searches without knowing the order of the array, and this is slow to compute at runtime. It also means <code>reverse</code> or rotations cannot be used while keeping the <code>DimArray</code> wrapper.</p><p>Step sizes are also a problem. Some ranges like <code>LinRange</code> lose their step size with a length of <code>1</code>. Often, instead of a range, multi-dimensional data formats provide a <code>Vector</code> of evenly spaced values for a lookup, with a step size specified separately. Converting to a range introduces floating point errors that means points may not be selected with <code>At</code> without setting tolerances.</p><p>This means using a lookup wrapper with traits is more generally robust and versatile than simply using a range or vector. DimensionalData provides types for specifying details about the dimension index, in the <a href="../api/#DimensionalData.Dimensions.LookupArrays"><code>LookupArrays</code></a> sub-module:</p><pre><code class="language-julia hljs">using DimensionalData
using .LookupArrays</code></pre><p>The main <a href="../api/#DimensionalData.Dimensions.LookupArrays.LookupArray"><code>LookupArray</code></a> are :</p><ul><li><a href="../api/#DimensionalData.Dimensions.LookupArrays.Sampled"><code>Sampled</code></a> </li><li><a href="../api/#DimensionalData.Dimensions.LookupArrays.Categorical"><code>Categorical</code></a>,</li><li><a href="../api/#DimensionalData.Dimensions.LookupArrays.NoLookup"><code>NoLookup</code></a></li></ul><p>Each comes with specific traits that are either fixed or variable, depending on the contained index. These enable optimisations with <code>Selector</code>s, and modified behaviours, such as:</p><ol><li>Selection of <a href="../api/#DimensionalData.Dimensions.LookupArrays.Intervals"><code>Intervals</code></a> or <a href="../api/#DimensionalData.Dimensions.LookupArrays.Points"><code>Points</code></a>, which will give slightly</li></ol><p>different results for selectors like <code>..</code> - as whole intervals are   selected, and have different <code>bounds</code> values.</p><ol><li>Tracking of lookup order. A reverse order is labelled <code>ReverseOrdered</code> and</li></ol><p>will still work with <code>searchsorted</code>, and for plots to always be the right way   up when either the index or the array is backwards. Reversing a <code>DimArray</code>   will reverse the <code>LookupArray</code> for that dimension, swapping <code>ReverseOrdered</code>   to <code>ForwardOrdered</code>.</p><ol><li><code>Sampled</code> <a href="../api/#DimensionalData.Dimensions.LookupArrays.Intervals"><code>Intervals</code></a> can have index located at a <a href="../api/#DimensionalData.Dimensions.LookupArrays.Locus"><code>Locus</code></a> of: </li></ol><ul><li><a href="../api/#DimensionalData.Dimensions.LookupArrays.Start"><code>Start</code></a>,</li><li><a href="../api/#DimensionalData.Dimensions.LookupArrays.Center"><code>Center</code></a> </li><li><a href="../api/#DimensionalData.Dimensions.LookupArrays.End"><code>End</code></a></li></ul><p>Which specifies the point of the interval represented in the index, to match different data standards, e.g. GeoTIFF (<code>Start</code>) and NetCDF (<code>Center</code>).</p><ol><li>A <a href="../api/#DimensionalData.Dimensions.LookupArrays.Span"><code>Span</code></a> specifies the gap between <code>Points</code> or the size of</li></ol><p><code>Intervals</code>. This may be: </p><ul><li><a href="../api/#DimensionalData.Dimensions.LookupArrays.Regular"><code>Regular</code></a>, in the case of a range and equally spaced vector, </li><li><a href="../api/#DimensionalData.Dimensions.LookupArrays.Irregular"><code>Irregular</code></a> for unequally spaced vectors</li><li><a href="../api/#DimensionalData.Dimensions.LookupArrays.Explicit"><code>Explicit</code></a> for the case where all interval start and end points are specified explicitly - as is common in the NetCDF standard.</li></ul><p>These traits all for subtypes of <a href="../api/#DimensionalData.Dimensions.LookupArrays.Aligned"><code>Aligned</code></a>.</p><p><a href="../api/#DimensionalData.Dimensions.LookupArrays.Unaligned"><code>Unaligned</code></a> also exists to handle dimensions with an index that is rotated or otherwise transformed in relation to the underlying array, such as <a href="../api/#DimensionalData.Dimensions.LookupArrays.Transformed"><code>Transformed</code></a>.</p><h2 id="LookupArray-detection"><a class="docs-heading-anchor" href="#LookupArray-detection">LookupArray detection</a><a id="LookupArray-detection-1"></a><a class="docs-heading-anchor-permalink" href="#LookupArray-detection" title="Permalink"></a></h2><p><a href="../api/#DimensionalData.Dimensions.LookupArrays.Aligned"><code>Aligned</code></a> types will be detected automatically if not specified - which usually isn&#39;t required. </p><ul><li>An empty <code>Dimension</code> or a <code>Type</code> or <code>Symbol</code> will be assigned <code>NoLookup</code> - this behaves as a simple named dimension without a lookup index.</li><li>A <code>Dimension</code> containing and index of <code>String</code>, <code>Char</code>, <code>Symbol</code> or mixed types will be given the <a href="../api/#DimensionalData.Dimensions.LookupArrays.Categorical"><code>Categorical</code></a> mode,</li><li>A range will be assigned <a href="../api/#DimensionalData.Dimensions.LookupArrays.Sampled"><code>Sampled</code></a>, defaulting to  <a href="../api/#DimensionalData.Dimensions.LookupArrays.Regular"><code>Regular</code></a>, <a href="../api/#DimensionalData.Dimensions.LookupArrays.Points"><code>Points</code></a> </li><li>Other <code>AbstractVector</code> will be assigned <a href="../api/#DimensionalData.Dimensions.LookupArrays.Sampled"><code>Sampled</code></a> <a href="../api/#DimensionalData.Dimensions.LookupArrays.Irregular"><code>Irregular</code></a> <a href="../api/#DimensionalData.Dimensions.LookupArrays.Points"><code>Points</code></a>.</li></ul><p>In all cases the <a href="../api/#DimensionalData.Dimensions.LookupArrays.Order"><code>Order</code></a> of <a href="../api/#DimensionalData.Dimensions.LookupArrays.ForwardOrdered"><code>ForwardOrdered</code></a> or <a href="../api/#DimensionalData.Dimensions.LookupArrays.ReverseOrdered"><code>ReverseOrdered</code></a> will be be detected, otherwise <a href="../api/#DimensionalData.Dimensions.LookupArrays.Unordered"><code>Unordered</code></a> for an unsorted <code>Array</code>.</p><p>See the <a href="../api/#DimensionalData.Dimensions.LookupArrays.LookupArray"><code>LookupArray</code></a> API docs for more detail.</p><h2 id="Referenced-dimensions"><a class="docs-heading-anchor" href="#Referenced-dimensions">Referenced dimensions</a><a id="Referenced-dimensions-1"></a><a class="docs-heading-anchor-permalink" href="#Referenced-dimensions" title="Permalink"></a></h2><p>The reference dimensions record the previous dimensions that an array was selected from. These can be use for plot labelling, and tracking array changes so that <code>cat</code> can reconstruct the lookup array from previous dimensions that have been sliced.</p><h2 id="Warnings"><a class="docs-heading-anchor" href="#Warnings">Warnings</a><a id="Warnings-1"></a><a class="docs-heading-anchor-permalink" href="#Warnings" title="Permalink"></a></h2><p>Indexing with unordered or reverse-ordered arrays has undefined behaviour. It will trash the dimension index, break <code>searchsorted</code> and nothing will make sense any more. So do it at you own risk.</p><p>However, indexing with sorted vectors of <code>Int</code> can be useful, so it&#39;s allowed. But it may do strange things to interval sizes for <a href="../api/#DimensionalData.Dimensions.LookupArrays.Intervals"><code>Intervals</code></a> that are not <a href="../api/#DimensionalData.Dimensions.LookupArrays.Explicit"><code>Explicit</code></a>.</p><p>This selects the first 5 entries of the underlying array. In the case that <code>A</code> has only one dimension, it will be retained. Multidimensional <code>AbstracDimArray</code> indexed this way will return a regular array.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">¬´ Introduction</a><a class="docs-footer-nextpage" href="../api/">API ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Wednesday 22 February 2023 00:24">Wednesday 22 February 2023</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
